<div class="login-container">
  <div class="login-card">
    <div class="form-header">
      <h2>Set New Password</h2>
      <p>Please enter your new password below.</p>
    </div>

    <form [formGroup]="resetPasswordForm" (ngSubmit)="onSubmit()" class="login-form">
      
      <div *ngIf="successMessage" class="success-message">
        {{ successMessage }} Redirecting to login...
      </div>
      
      <div *ngIf="errorMessage" class="api-error">
        {{ errorMessage }}
      </div>

      <div class="form-group" *ngIf="!successMessage">
        <label for="password">New Password</label>
        <div *ngIf="password?.invalid && password?.touched" class="validation-error">
          <span *ngIf="password?.errors?.['required']">A new password is required.</span>
          <span *ngIf="password?.errors?.['minlength']">Password must be at least 8 characters long.</span>
        </div>
        <div class="input-group">
          <svg class="input-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor"><path d="M12,17A2,2 0 0,0 14,15C14,13.89 13.1,13 12,13A2,2 0 0,0 10,15A2,2 0 0,0 12,17M18,8A2,2 0 0,1 20,10V20A2,2 0 0,1 18,22H6A2,2 0 0,1 4,20V10C4,8.89 4.9,8 6,8H7V6A5,5 0 0,1 12,1A5,5 0 0,1 17,6V8H18M12,3A3,3 0 0,0 9,6V8H15V6A3,3 0 0,0 12,3Z"/></svg>
          <input id="password" [type]="showPassword ? 'text' : 'password'" formControlName="password" placeholder="Enter your new password" [class.is-invalid]="password?.invalid && password?.touched">
          <button type="button" class="password-toggle" (click)="togglePasswordVisibility()" aria-label="Toggle password visibility">
            <svg *ngIf="!showPassword" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor"><path d="M12,9A3,3 0 0,0 9,12A3,3 0 0,0 12,15A3,3 0 0,0 15,12A3,3 0 0,0 12,9M12,17A5,5 0 0,1 7,12A5,5 0 0,1 12,7A5,5 0 0,1 17,12A5,5 0 0,1 12,17M12,4.5C7,4.5 2.73,7.61 1,12C2.73,16.39 7,19.5 12,19.5C17,19.5 21.27,16.39 23,12C21.27,7.61 17,4.5 12,4.5Z"/></svg>
            <svg *ngIf="showPassword" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor"><path d="M2,5.27L3.28,4L20,20.72L18.73,22L15.65,18.92C14.5,19.3 13.28,19.5 12,19.5C7,19.5 2.73,16.39 1,12C2.73,7.61 7,4.5 12,4.5C13.28,4.5 14.5,4.7 15.65,5.08L18.73,2L20,3.27L2,5.27M12,9A3,3 0 0,0 9,12C9,12.36 9.05,12.72 9.14,13.05L15.95,6.14C15.28,9.05 14.64,9 12,9M12,7A5,5 0 0,1 17,12C17,12.64 16.95,13.28 16.86,13.95L12,9.14C12,9.05 12,9 12,9A3,3 0 0,1 12,7M12,7A5,5 0 0,1 17,12C17,12.64 16.95,13.28 16.86,13.95L12,9.14C12,9.05 12,9 12,9A3,3 0 0,1 12,7M12,7A5,5 0 0,1 17,12C17,12.64 16.95,13.28 16.86,13.95L12,9.14C12,9.05 12,9 12,9A3,3 0 0,1 12,7Z"/></svg>
          </button>
        </div>
      </div>

      <button type="submit" [disabled]="isLoading" class="submit-btn" *ngIf="!successMessage">
        <span *ngIf="!isLoading">Reset Password</span>
        <div *ngIf="isLoading" class="spinner"></div>
      </button>

    </form>
  </div>
</div>